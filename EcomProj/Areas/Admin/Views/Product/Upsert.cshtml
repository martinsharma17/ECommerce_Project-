@model EcomProj.Model.ViewModel.ProductVM


<form method="post" asp-action="Upsert" enctype="multipart/form-data">
    <input asp-for="Product.Id" hidden />
    <input asp-for="Product.Image" hidden />

    <div class = "row">
        <div class="col-10">
                <div class="border p-3 mt-4 row">
        <div class="col-12 pb-2">
            <h2 class="text-primary"> @(Model.Product.Id!=0?"Update":"Create") Product</h2>
        <hr />
        </div>
        <!--<div asp-validation-summary="All"></div>-->
        <div class="mb-3">
            <label asp-for="Product.Name"></label>
            <input asp-for="Product.Name" class="form-control" /> 
            <span asp-validation-for="Product.Name" class="text-danger"></span> <!-- for name validation bcoz cant be empty-->
        </div>  
        
        <div class="mb-3">
            <label asp-for="Product.Description"></label>
            <textarea asp-for="Product.Description" rows="3" class="form-control" ></textarea> 
            <span asp-validation-for="Product.Description" class="text-danger"></span> <!-- for name validation bcoz cant be empty-->
        </div>
        <div class="mb-3 col-6">
            <label asp-for="Product.Quantity"></label>
            <input asp-for="Product.Quantity" class="form-control" /> 
            <span asp-validation-for="Product.Quantity" class="text-danger"></span> <!-- for name validation bcoz cant be empty-->
        </div>

                <div class="mb-3 col-6">
            <label asp-for="Product.FixedPrice"></label>
            <input asp-for="Product.FixedPrice" class="form-control" /> 
            <span asp-validation-for="Product.FixedPrice" class="text-danger"></span> <!-- for name validation bcoz cant be empty-->
        </div>


                <div class="mb-3 col-6">
            <label asp-for="Product.DiscountPrice"></label>
            <input asp-for="Product.DiscountPrice" class="form-control" /> 
            <span asp-validation-for="Product.DiscountPrice" class="text-danger"></span> <!-- for name validation bcoz cant be empty-->
        </div>

               
                        
        
        <div class="mb-3">
            <label asp-for="Product.Image"></label>
            <input type="file" id="uploadBox" name="file" class="form-control" /> 
        </div>                
        
        <div class="mb-3 col-6">
            <label asp-for="Product.CategoryId"></label>
            <select asp-for="Product.CategoryId" asp-items="@Model.CategoryList" class="form-select">
                <option disabled selected>-Select Any Category-</option>
            </select>
            <span asp-validation-for="Product.CategoryId" class="text-danger"></span> <!-- for name validation bcoz cant be empty-->
        </div>


                <div class="mb-3 col-6">
            <label asp-for="Product.SubCategoryId"></label>
            <select asp-for="Product.SubCategoryId" asp-items="@Model.SubCategoryList" class="form-select">
                <option disabled selected>-Select Any CoverType-</option>
            </select>
            <span asp-validation-for="Product.SubCategoryId" class="text-danger"></span> <!-- for name validation bcoz cant be empty-->
        </div>

         
            <div class="col-12">

                @if(Model.Product.Id!=0){

            <button type="submit" class="btn btn-primary" style="width:150px">Update</button>
                }
                else{
            <button type="submit" onclick= "return ValidateInput()" class="btn btn-primary" style="width:150px">Create</button>

                }
            <a asp-controller="Product" asp-action="Index" class="btn btn-secondary" style="width:150px">
                Back to the List
            </a>
            </div>


    </div>
        </div>
        <div class="col-2 pt-4">
            <img src="@Model.Product.Image"
            width = "100%" style="border-radius:5px; border:1px solid black" />
        </div>
    </div>


</form>

  @section Scripts{

           <partial name = "_ValidationScriptsPartial"></partial>
}

<script>
    function ValidateInput(){
        if (document.getElementById("uploadBox").value == "") {
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Please upload Image!',
            });
            return false;

        }
        return true;
          
    }
</script>